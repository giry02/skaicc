<!-- [MODAL 5] 카테고리 모달 -->
<div class="hidden absolute inset-0 z-50 overflow-hidden" id="category-modal">
    <div class="absolute inset-0 bg-black/50 backdrop-blur-[2px]" onclick="toggleCategoryModal()"></div>
    <div
        class="absolute bottom-0 w-full h-[90%] bg-white rounded-t-[30px] flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-up">
        <div class="flex items-center justify-between px-6 pt-6 pb-2">
            <h2 class="text-xl font-extrabold text-gray-900">어떤 내용이 궁금하신가요?</h2>
            <button class="p-2 -mr-2 text-gray-400 hover:text-gray-600" onclick="toggleCategoryModal()"><i
                    class="w-7 h-7" data-lucide="x"></i></button>
        </div>
        <div class="flex-1 overflow-y-auto px-6 pb-10 scrollbar-hide">
            <div class="flex justify-between items-start mb-10 mt-4 px-2">
                <div class="flex flex-col items-center gap-2 cursor-pointer active:scale-95 transition-transform">
                    <div
                        class="w-14 h-14 bg-[#EEF2FF] rounded-full flex items-center justify-center text-[#5031E5] shadow-sm">
                        <i class="w-7 h-7" data-lucide="file-text"></i></div><span
                        class="text-sm font-bold text-gray-700">이용안내</span>
                </div>
                <div class="flex flex-col items-center gap-2 cursor-pointer active:scale-95 transition-transform">
                    <div
                        class="w-14 h-14 bg-[#EEF2FF] rounded-full flex items-center justify-center text-[#5031E5] shadow-sm">
                        <i class="w-7 h-7" data-lucide="headset"></i></div><span
                        class="text-sm font-bold text-gray-700">상담사 연결</span>
                </div>
                <div class="flex flex-col items-center gap-2 cursor-pointer active:scale-95 transition-transform">
                    <div
                        class="w-14 h-14 bg-[#F3E8FF] rounded-full flex items-center justify-center text-[#A855F7] shadow-sm">
                        <i class="w-7 h-7" data-lucide="bot"></i></div><span class="text-sm font-bold text-gray-700">챗봇
                        상담</span>
                </div>
            </div>
            <div class="space-y-8">
                <div>
                    <h3 class="text-[17px] font-bold text-gray-900 mb-3"># 요금 및 납부</h3>
                    <div class="flex flex-wrap gap-2"><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">카드
                            자동납부</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">은행
                            자동납부</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">요금
                            조회</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">입금계좌
                            안내</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">요금
                            결제</button></div>
                </div>
                <div>
                    <h3 class="text-[17px] font-bold text-gray-900 mb-3"># 증빙서류 발급</h3>
                    <div class="flex flex-wrap gap-2"><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">요금
                            안내서</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">요금
                            납부 이력 확인서</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">세금계산서</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">세금계산서
                            발행 이력</button></div>
                </div>
                <div class="relative">
                    <h3 class="text-[17px] font-bold text-gray-900 mb-3"># 서비스 이용 변경</h3>
                    <div class="flex flex-wrap gap-2 pr-8"><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">이전
                            설치</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">일시정지
                            해제</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">일시정지
                            신청</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">부가서비스
                            해지</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">월정액
                            해지</button></div>
                    <div class="absolute right-0 bottom-3 text-gray-400"><i class="w-5 h-5"
                            data-lucide="chevron-down"></i></div>
                </div>
                <div class="relative">
                    <h3 class="text-[17px] font-bold text-gray-900 mb-3"># 가입 및 정보 변경</h3>
                    <div class="flex flex-wrap gap-2 pr-8"><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">가입
                            문의</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">유무선
                            결합 신청</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">가입
                            정보</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">상품
                            업그레이드 신청</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">개통
                            진행</button></div>
                    <div class="absolute right-0 bottom-3 text-gray-400"><i class="w-5 h-5"
                            data-lucide="chevron-down"></i></div>
                </div>
                <div class="relative">
                    <h3 class="text-[17px] font-bold text-gray-900 mb-3"># 장애 및 지원</h3>
                    <div class="flex flex-wrap gap-2 pr-8"><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">고장
                            진단</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">망
                            작업/장애</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">리모컨
                            구매</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">B
                            tv 이용안내</button><button
                            class="px-4 py-2 bg-white border border-gray-200 rounded-full text-[14px] text-gray-600 font-medium active:bg-gray-50 transition-colors">모바일
                            B tv 설치</button></div>
                    <div class="absolute right-0 bottom-3 text-gray-400"><i class="w-5 h-5"
                            data-lucide="chevron-down"></i></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- [MODAL 1] 음성 인식 모달 -->
<div class="hidden absolute inset-0 z-50 overflow-hidden" id="listening-modal">
    <div class="absolute inset-0 bg-black/50 backdrop-blur-[2px]" onclick="toggleListeningModal()"></div>
    <div
        class="absolute bottom-0 w-full h-auto pb-8 bg-white rounded-t-[30px] flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-up">
        <div class="absolute top-4 right-4 z-10"><button class="p-2 text-gray-400 hover:text-gray-600"
                onclick="toggleListeningModal()"><i class="w-7 h-7" data-lucide="x"></i></button></div>
        <div class="pt-6 px-6 pb-0 text-center">
            <h2 class="text-[22px] font-extrabold text-gray-900">듣고 있습니다</h2>
            <p class="text-[18px] font-bold text-[#5031E5] mt-2">말씀해 주세요</p>
        </div>
        <div class="flex-1 flex flex-col items-center justify-start px-6 pt-4">
            <div class="flex items-center justify-center gap-2 h-12 mb-6">
                <div class="w-2.5 bg-[#5031E5] rounded-full animate-wave-1"></div>
                <div class="w-2.5 bg-[#5031E5] rounded-full animate-wave-2"></div>
                <div class="w-2.5 bg-[#5031E5] opacity-60 rounded-full animate-wave-3 h-[30px]"></div>
                <div class="w-2.5 bg-[#5031E5] rounded-full animate-wave-4"></div>
                <div class="w-2.5 bg-[#5031E5] rounded-full animate-wave-5"></div>
            </div>
            <div class="w-full space-y-3">
                <div class="w-full bg-white border-[2px] border-[#5031E5] rounded-2xl p-5 text-left cursor-pointer active:bg-indigo-50 shadow-sm relative group"
                    onclick="simulateSuccess()">
                    <p class="text-[13px] font-bold text-[#5031E5] mb-1">인식 성공 시뮬레이션</p>
                    <p class="text-[18px] font-extrabold text-[#1a1a1a]">"이번 달 <span class="text-[#5031E5]">요금</span>
                        확인해줘"</p>
                    <i class="absolute right-5 top-1/2 -translate-y-1/2 text-[#5031E5] w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity"
                        data-lucide="mic"></i>
                </div>
                <div class="w-full bg-white border border-gray-200 rounded-2xl p-5 text-left cursor-pointer active:bg-gray-50 transition-colors shadow-sm"
                    onclick="simulateFail()">
                    <p class="text-[13px] font-bold text-gray-400 mb-1">인식 실패 시뮬레이션</p>
                    <p class="text-[18px] font-bold text-gray-400">"어... 그게... 음..."</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- [MODAL 2] 검색 모달 -->
<div class="hidden absolute inset-0 z-50 overflow-hidden" id="search-modal">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]" onclick="toggleSearchModal()"></div>
    <div
        class="absolute bottom-0 w-full h-[90%] bg-white rounded-t-[30px] flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-up">
        <div class="absolute top-4 right-4 z-10"><button class="p-2 text-gray-400 hover:text-gray-600"
                onclick="toggleSearchModal()"><i class="w-7 h-7" data-lucide="x"></i></button></div>
        <div class="p-6 pb-2">
            <div class="flex items-center justify-center mb-6 pt-2">
                <h2 class="text-lg font-bold text-gray-900">업무 검색</h2>
            </div>
            <div class="relative w-full">
                <div
                    class="flex items-center bg-gray-100 rounded-[16px] px-4 py-3 transition-all focus-within:bg-white focus-within:ring-2 focus-within:ring-[#5031E5] transition-all">
                    <i class="text-gray-400 w-5 h-5 mr-3" data-lucide="search"></i><input
                        class="w-full bg-transparent outline-none text-gray-800 text-[16px]" id="search-input"
                        oninput="handleInput(this)" placeholder="무엇을 도와드릴까요?" type="text" /><i
                        class="text-[#5031E5] w-5 h-5 ml-2" data-lucide="mic"></i></div>
            </div>
        </div>
        <div class="flex-1 overflow-y-auto px-6 pb-10 scrollbar-hide">
            <div class="hidden mb-6" id="search-results-container">
                <div class="bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden" id="suggestions">
                </div>
            </div>
            <div class="hidden mb-6" id="faq-section">
                <div class="bg-gray-50 rounded-2xl overflow-hidden border border-gray-100">
                    <button class="w-full px-5 py-4 flex items-center justify-between group"
                        onclick="toggleAccordion('faq-content', 'faq-chevron')">
                        <div class="flex items-center gap-3">
                            <div
                                class="w-6 h-6 bg-[#A855F7] rounded-full flex items-center justify-center text-white text-[12px]">
                                <i class="w-4 h-4" data-lucide="help-circle"></i></div><span
                                class="font-bold text-gray-800">자주 묻는 질문</span>
                        </div><i class="w-5 h-5 text-gray-400 transition-transform" data-lucide="chevron-down"
                            id="faq-chevron"></i>
                    </button>
                    <div class="accordion-content bg-white" id="faq-content">
                        <div class="px-5 py-2 border-t border-gray-50">
                            <div
                                class="flex items-center justify-between py-4 border-b border-gray-50 cursor-pointer hover:bg-gray-50">
                                <span class="text-gray-600 text-sm">이전 <span class="text-[#5031E5] font-bold">요금</span>
                                    내역을 확인하는 방법</span><i class="w-4 h-4 text-gray-300" data-lucide="chevron-right"></i>
                            </div>
                            <div class="flex items-center justify-between py-4 cursor-pointer hover:bg-gray-50"><span
                                    class="text-gray-600 text-sm"><span class="text-[#5031E5] font-bold">요금</span> 결제
                                    방법은 어떤게 있나요?</span><i class="w-4 h-4 text-gray-300" data-lucide="chevron-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button
                class="w-full py-5 bg-[#ebf2ff] rounded-2xl text-[#5031E5] font-bold flex items-center justify-center gap-2 active:bg-blue-100 transition-colors"
                onclick="continueCounseling()"><i class="w-5 h-5" data-lucide="arrow-left"></i>이어서 상담받기</button>
        </div>
    </div>
</div>

<!-- [MODAL 3] 분석 결과 모달 -->
<div class="hidden absolute inset-0 z-50 overflow-hidden" id="result-modal">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]" onclick="toggleResultModal()"></div>
    <div
        class="absolute bottom-0 w-full h-[90%] bg-white rounded-t-[30px] flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-up">
        <div class="w-full flex justify-center pt-3 pb-2">
            <div class="w-10 h-1 bg-gray-300 rounded-full"></div>
        </div>
        <div class="absolute top-4 right-4 z-10"><button class="p-2 text-gray-400 hover:text-gray-600"
                onclick="toggleResultModal()"><i class="w-7 h-7" data-lucide="x"></i></button></div>
        <div class="px-6 pt-6 pb-6 flex flex-col items-center text-center">
            <h2 class="text-[22px] font-extrabold text-gray-900 mb-3 leading-tight">"<span
                    class="text-[#5031E5]">요금</span>"으로 검색한 결과예요.</h2><span
                class="bg-[#EBF2FF] text-[#5031E5] text-[13px] font-bold px-4 py-1.5 rounded-full">분석 완료</span>
        </div>
        <div class="flex-1 overflow-y-auto px-6 pb-10 scrollbar-hide">
            <div class="bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden mb-6">
                <div
                    class="px-5 py-4 border-b border-gray-50 flex justify-between items-center group cursor-pointer hover:bg-[#ebf2ff] transition-colors group">
                    <span class="text-gray-700 font-medium text-[16px]"><span class="text-[#5031E5] font-bold">요금</span>
                        조회/납부</span><i class="w-4 h-4 text-gray-300 group-hover:text-[#5031E5]"
                        data-lucide="chevron-right"></i></div>
                <div
                    class="px-5 py-4 border-b border-gray-50 flex justify-between items-center group cursor-pointer hover:bg-[#ebf2ff] transition-colors group">
                    <span class="text-gray-700 font-medium text-[16px]"><span class="text-[#5031E5] font-bold">요금</span>
                        안내서</span><i class="w-4 h-4 text-gray-300 group-hover:text-[#5031E5]"
                        data-lucide="chevron-right"></i></div>
                <div
                    class="px-5 py-4 border-b border-gray-50 flex justify-between items-center group cursor-pointer hover:bg-[#ebf2ff] transition-colors group">
                    <span class="text-gray-700 font-medium text-[16px]"><span class="text-[#5031E5] font-bold">요금</span>
                        납부내역 조회</span><i class="w-4 h-4 text-gray-300 group-hover:text-[#5031E5]"
                        data-lucide="chevron-right"></i></div>
                <div
                    class="px-5 py-4 border-b border-gray-50 flex justify-between items-center group cursor-pointer hover:bg-[#ebf2ff] transition-colors group">
                    <span class="text-gray-700 font-medium text-[16px]">실시간 <span
                            class="text-[#5031E5] font-bold">요금</span> 확인</span><i
                        class="w-4 h-4 text-gray-300 group-hover:text-[#5031E5]" data-lucide="chevron-right"></i></div>
                <div
                    class="px-5 py-4 flex justify-between items-center group cursor-pointer hover:bg-[#ebf2ff] transition-colors group">
                    <span class="text-gray-700 font-medium text-[16px]"><span
                            class="text-[#5031E5] font-bold">요금</span>납부 방법</span><i
                        class="w-4 h-4 text-gray-300 group-hover:text-[#5031E5]" data-lucide="chevron-right"></i></div>
            </div>
            <div class="bg-gray-50 rounded-2xl overflow-hidden border border-gray-100 mb-6">
                <button class="w-full px-5 py-4 flex items-center justify-between group"
                    onclick="toggleAccordion('result-faq-content', 'result-faq-chevron')">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-6 h-6 bg-[#5031E5] rounded-full flex items-center justify-center text-white text-[12px]">
                            <i class="w-4 h-4" data-lucide="help-circle"></i></div><span
                            class="font-bold text-gray-800 text-[16px]">자주 묻는 질문</span>
                    </div><i class="w-5 h-5 text-gray-400 transition-transform" data-lucide="chevron-down"
                        id="result-faq-chevron"></i>
                </button>
                <div class="accordion-content bg-white" id="result-faq-content">
                    <div class="px-5 py-2 border-t border-gray-50">
                        <div
                            class="flex items-center justify-between py-4 border-b border-gray-50 cursor-pointer hover:bg-gray-50">
                            <span class="text-gray-600 text-sm">이전 <span class="text-[#5031E5] font-bold">요금</span> 내역
                                확인 방법</span><i class="w-4 h-4 text-gray-300" data-lucide="chevron-right"></i></div>
                        <div class="flex items-center justify-between py-4 cursor-pointer hover:bg-gray-50"><span
                                class="text-gray-600 text-sm"><span class="text-[#5031E5] font-bold">요금</span> 결제
                                방법은?</span><i class="w-4 h-4 text-gray-300" data-lucide="chevron-right"></i></div>
                    </div>
                </div>
            </div>
            <button
                class="w-full py-5 bg-[#EBF2FF] rounded-2xl text-[#5031E5] font-bold flex items-center justify-center gap-2 active:bg-blue-100 transition-colors text-[16px]"
                onclick="continueCounseling()"><i class="w-5 h-5" data-lucide="arrow-left"></i>이어서 상담받기</button>
        </div>
    </div>
</div>

<!-- [MODAL 4] 인식 실패 모달 -->
<div class="hidden absolute inset-0 z-50 overflow-hidden" id="fail-modal">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]" onclick="toggleFailModal()"></div>
    <div
        class="absolute bottom-0 w-full h-auto pb-10 bg-white rounded-t-[30px] flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-up">
        <div class="absolute top-4 right-4 z-10"><button class="p-2 text-gray-400 hover:text-gray-600"
                onclick="toggleFailModal()"><i class="w-7 h-7" data-lucide="x"></i></button></div>
        <div class="flex-1 flex flex-col items-center justify-start px-6 pt-12">
            <div class="mb-4 text-gray-300"><i class="w-14 h-14" data-lucide="mic-off"></i></div>
            <h2 class="text-[22px] font-bold text-gray-900 mb-8">잘 이해하지 못했어요.</h2>
            <div class="w-full space-y-3">
                <button
                    class="w-full py-4 bg-[#2563EB] rounded-2xl text-white font-bold text-[16px] shadow-sm active:bg-blue-700 transition-colors flex items-center justify-center gap-2"
                    onclick="retryListening()"><i class="w-5 h-5" data-lucide="rotate-ccw"></i>다시 시도하기</button>
                <button
                    class="w-full py-4 bg-[#EBF2FF] rounded-2xl text-[#5031E5] font-bold text-[16px] active:bg-blue-100 transition-colors flex items-center justify-center gap-2"
                    onclick="continueCounseling()"><i class="w-5 h-5" data-lucide="arrow-left"></i>이어서 상담받기</button>
                <button
                    class="w-full py-4 bg-white border border-gray-200 rounded-2xl text-gray-800 font-bold text-[16px] active:bg-gray-50 transition-colors flex items-center justify-center gap-2"><i
                        class="w-5 h-5 text-orange-500" data-lucide="headset"></i>상담사 연결하기</button>
            </div>
        </div>
    </div>
</div>